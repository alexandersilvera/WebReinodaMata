---
import { SEO } from "astro-seo"; 
import "@/styles/global.css";

interface Props {
	title: string;
	description?: string;
	image?: string;
}

const {
	title,
	description = "Centro Umbandista Reino Da Mata - Centro Umbandista. Estudios, investigación y difusión de la cultura y religiosidad Afro-amerindia.",
	image = "/assets/logo.svg",
} = Astro.props;

// Construct the full image URL for Open Graph
const siteURL = Astro.site ? Astro.site.toString() : Astro.url.origin;
const ogImageURL = new URL(image, siteURL).toString();

// Define los datos de la organización para Schema.org
const baseUrl = Astro.site ? Astro.site.toString() : Astro.url.origin;

// Schema.org: PlaceOfWorship
const placeOfWorshipSchema = {
	"@context": "https://schema.org",
	"@type": "PlaceOfWorship",
	"name": "Centro Umbandista Reino da Mata",
	"url": baseUrl,
	"logo": new URL("/assets/logo.svg", baseUrl).toString(),
	"description": "Centro Umbandista Reino da Mata, estudios investigación y difusión de la cultura y la religiosidad afro-umbandista. Nuestra misión es la investigación de las distintas escuelas Umbandistas, historia, practica y desarrollo ritualistico. Difundiendo las distintas tradiciones o raices religiosas afro-umbandistas que se desarrollaron y se expandieron en Brasil, su afincamiento en Uruguay através de los distintos pioneros y pioneras de nuestra Umbanda.",
	"address": {
		"@type": "PostalAddress",
		"streetAddress": "José María Delgado 1935",
		"addressLocality": "Montevideo",
		"addressCountry": "UY"
	},
	"telephone": "095309322"
};

// Schema.org: Organization (para mejor SEO y reconocimiento)
const organizationSchema = {
	"@context": "https://schema.org",
	"@type": "Organization",
	"name": "Centro Umbandista Reino Da Mata",
	"alternateName": "Reino Da Mata",
	"url": baseUrl,
	"logo": new URL("/assets/logo.svg", baseUrl).toString(),
	"description": description,
	"address": {
		"@type": "PostalAddress",
		"streetAddress": "José María Delgado 1935",
		"addressLocality": "Montevideo",
		"addressRegion": "Montevideo",
		"postalCode": "11200",
		"addressCountry": "UY"
	},
	"contactPoint": {
		"@type": "ContactPoint",
		"telephone": "+598-95-309-322",
		"contactType": "Informes",
		"availableLanguage": ["es", "pt"]
	},
	"sameAs": [
		// Agregar redes sociales cuando estén disponibles
	]
};

// Schema.org: WebSite con SearchAction (mejora búsqueda en Google)
const websiteSchema = {
	"@context": "https://schema.org",
	"@type": "WebSite",
	"name": "Centro Umbandista Reino Da Mata",
	"url": baseUrl,
	"description": description,
	"potentialAction": {
		"@type": "SearchAction",
		"target": {
			"@type": "EntryPoint",
			"urlTemplate": baseUrl + "/blog?q={search_term_string}"
		},
		"query-input": "required name=search_term_string"
	}
};

---

<head>
	<!-- Global Metadata -->
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta name="generator" content={Astro.generator} />
	<meta name="author" content="Centro Umbandista Reino Da Mata" />
	<meta name="theme-color" content="#16a34a" />

	<!-- Favicons -->
	<link rel="icon" type="image/svg+xml" href="/assets/logo.svg" />
	<link rel="shortcut icon" href="/assets/logo.svg" type="image/svg+xml" />
	<link rel="apple-touch-icon" href="/assets/logo.svg" />

	<!-- DNS Prefetch & Preconnect para mejorar performance -->
	<link rel="dns-prefetch" href="https://firebasestorage.googleapis.com" />
	<link rel="preconnect" href="https://firebasestorage.googleapis.com" crossorigin />
	<link rel="dns-prefetch" href="https://player.vimeo.com" />
	<link rel="preconnect" href="https://player.vimeo.com" crossorigin />
	<link rel="dns-prefetch" href="https://i.vimeocdn.com" />
	<link rel="preconnect" href="https://i.vimeocdn.com" crossorigin />

	<!-- Canonical URL -->
	<link rel="canonical" href={Astro.url.toString()} />

	<!-- Font Preloads -->
	<!-- crossorigin es necesario para que el modo de credenciales coincida con la carga desde CSS -->
	<link
		rel="preload"
		href="/fonts/ProductSans-Bold.woff"
		as="font"
		type="font/woff"
		crossorigin="anonymous"
	/>
	<link
		rel="preload"
		href="/fonts/ProductSans-Light.woff"
		as="font"
		type="font/woff"
		crossorigin="anonymous"
	/>
	<link
		rel="preload"
		href="/fonts/ProductSans-Medium.woff"
		as="font"
		type="font/woff"
		crossorigin="anonymous"
	/>
	<link
		rel="preload"
		href="/fonts/ProductSans-Regular.woff"
		as="font"
		type="font/woff"
		crossorigin="anonymous"
	/>

	{/* Reemplazo de meta tags manuales con el componente SEO */}
	<SEO
		title={title}
		description={description}
		openGraph={{
			basic: {
				title: title,
				type: "website",
				image: ogImageURL,
			},
			optional: {
				locale: "es_UY",
				siteName: "Centro Umbandista Reino Da Mata",
			},
			image: {
				alt: "Centro Umbandista Reino Da Mata - Espiritualidad y Comunidad",
			},
		}}
		twitter={{
			card: "summary_large_image",
			title: title,
			description: description,
			image: ogImageURL,
			imageAlt: "Centro Umbandista Reino Da Mata"
		}}
	/>

	<!-- Schema.org JSON-LD - Múltiples schemas para mejor SEO -->
	<script type="application/ld+json" is:inline set:html={JSON.stringify(placeOfWorshipSchema)}></script>
	<script type="application/ld+json" is:inline set:html={JSON.stringify(organizationSchema)}></script>
	<script type="application/ld+json" is:inline set:html={JSON.stringify(websiteSchema)}></script>

	<!-- Enable view transitions for better page navigation -->
	<meta name="view-transition" content="same-origin" />
</head>

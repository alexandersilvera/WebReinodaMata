---
import { SEO } from "astro-seo"; 
import "@/styles/global.css";

interface Props {
	title: string;
	description?: string;
	image?: string;
}

const {
	title,
	description = "Centro Umbandista Reino Da Mata - Centro Umbandista. Estudios, investigación y difusión de la cultura y religiosidad Afro-amerindia.",
	image = "/assets/logo.svg",
} = Astro.props;

// Construct the full image URL for Open Graph
const siteURL = Astro.site ? Astro.site.toString() : Astro.url.origin;
const ogImageURL = new URL(image, siteURL).toString();

// Define los datos de la organización para Schema.org
const placeOfWorshipSchema = {
	"@context": "https://schema.org",
	"@type": "PlaceOfWorship",
	"name": "Centro Umbandista Reino da Mata",
	"url": Astro.site ? Astro.site.toString() : Astro.url.origin, // Usa Astro.site si está definido
	"logo": new URL("/assets/logo.svg", Astro.site || Astro.url.origin).toString(), // Asume logo en public/assets/logo.svg
	"description": "Centro Umbandista Reino da Mata, estudios investigación y difusión de la cultura y la religiosidad afro-umbandista. Nuestra misión es la investigación de las distintas escuelas Umbandistas, historia, practica y desarrollo ritualistico. Difundiendo las distintas tradiciones o raices religiosas afro-umbandistas que se desarrollaron y se expandieron en Brasil, su afincamiento en Uruguay através de los distintos pioneros y pioneras de nuestra Umbanda.",
	"address": {
		"@type": "PostalAddress",
		"streetAddress": "José María Delgado 1935",
		"addressLocality": "Montevideo",
		"addressCountry": "UY" // Código ISO 3166-1 alpha-2 para Uruguay
	},
	"telephone": "095309322"
};

---

<head>
	<!-- Global Metadata -->
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link
		rel="shortcut icon"
		href="/assets/logo.svg"
		type="image/svg+xml"
	/>

	<!-- DNS Prefetch & Preconnect para mejorar performance -->
	<link rel="dns-prefetch" href="https://firebasestorage.googleapis.com" />
	<link rel="preconnect" href="https://firebasestorage.googleapis.com" crossorigin />
	<link rel="dns-prefetch" href="https://player.vimeo.com" />
	<link rel="preconnect" href="https://player.vimeo.com" crossorigin />
	<link rel="dns-prefetch" href="https://i.vimeocdn.com" />
	<link rel="preconnect" href="https://i.vimeocdn.com" crossorigin />

	<!-- Canonical URL -->
	<link rel="canonical" href={Astro.url.toString()} />

	<!-- Font Preloads -->
	<link
		rel="preload"
		href="/fonts/ProductSans-Bold.woff"
		as="font"
		type="font/woff"
		crossorigin
	/>
	<link
		rel="preload"
		href="/fonts/ProductSans-Light.woff"
		as="font"
		type="font/woff"
		crossorigin
	/>
	<link
		rel="preload"
		href="/fonts/ProductSans-Medium.woff"
		as="font"
		type="font/woff"
		crossorigin
	/>
	<link
		rel="preload"
		href="/fonts/ProductSans-Regular.woff"
		as="font"
		type="font/woff"
		crossorigin
	/>

	{/* Reemplazo de meta tags manuales con el componente SEO */}
	<SEO
		title={title}
		description={description}
		openGraph={{
			basic: {
				title: title,
				type: "website",
				image: ogImageURL,
			},
			optional: {
				locale: "es_UY",
				siteName: "Centro Umbandista Reino Da Mata",
			},
			image: {
				alt: "Centro Umbandista Reino Da Mata - Espiritualidad y Comunidad",
			},
		}}
		twitter={{
			card: "summary_large_image",
			title: title,
			description: description,
			image: ogImageURL,
			imageAlt: "Centro Umbandista Reino Da Mata"
		}}
	/>

	<!-- Schema.org JSON-LD -->
	<script type="application/ld+json" is:inline set:html={JSON.stringify(placeOfWorshipSchema)}></script>
	
	<!-- Enable view transitions for better page navigation -->
	<meta name="view-transition" content="same-origin" />
</head>

---
import Article from "@/components/Article.astro";
import ArticleList from "@/layouts/ArticleList.astro";
import { getPublishedArticles } from "@/services/articleService";

// Configurar para renderizado dinámico en el cliente y evitar errores de SSR
export const prerender = false;

// Obtener artículos publicados desde Firestore
const firestoreArticles = await getPublishedArticles();

// Convertir los artículos de Firestore al formato esperado por el componente
const posts = firestoreArticles.map(article => ({
	data: {
		title: article.title,
		description: article.description,
		pubDate: article.publishDate.toDate(), // Convertir Timestamp a Date
		heroImage: article.image,
		tags: article.tags,
		author: article.author
	},
	slug: article.slug
}));
---

<ArticleList 
	title="Blog | Ile Axe Reino Da Mata"
	description="Artículos y publicaciones sobre Umbanda, estudios Afro-amerindios, historia y prácticas ritualísticas del Ile Axe Reino Da Mata."
>
	{posts.map((post) => <Article {...post.data} slug={post.slug} />)}
</ArticleList>

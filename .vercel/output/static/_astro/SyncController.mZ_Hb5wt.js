import{j as e}from"./jsx-runtime.BjG_zV1W.js";import{r as l}from"./index.BcVDQ18_.js";import{h as m,f as x}from"./config.DlMdeYpO.js";function b(){const[n,i]=l.useState(null),[c,o]=l.useState(null),[t,r]=l.useState({sync:!1,migrate:!1}),[a,d]=l.useState(null),h=m(x,"syncContentToFiles"),g=m(x,"migrateMarkdownToFirestore"),u=async()=>{i("Iniciando sincronización..."),r(s=>({...s,sync:!0}));try{await h(),i("Sincronización completada con éxito")}catch(s){i(`Error: ${s.message||"No se pudo completar la sincronización"}`)}finally{r(s=>({...s,sync:!1}))}},p=async()=>{o("Iniciando migración de archivos a Firestore..."),r(s=>({...s,migrate:!0})),d(null);try{const s=await g();o("Migración completada"),d(s.data)}catch(s){o(`Error: ${s.message||"No se pudo completar la migración"}`)}finally{r(s=>({...s,migrate:!1}))}};return e.jsxs("div",{className:"bg-green-900/30 p-6 rounded-lg backdrop-blur-sm",children:[e.jsx("h2",{className:"text-xl font-bold text-green-500 mb-4",children:"Control de Sincronización"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-b border-green-800 pb-4",children:[e.jsx("h3",{className:"text-lg text-white mb-2",children:"Markdown ← Firestore"}),e.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Sincroniza los artículos de Firestore a archivos Markdown para generar páginas estáticas."}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-2 md:space-y-0 md:space-x-3",children:[e.jsxs("button",{onClick:u,disabled:t.sync,className:`px-4 py-2 rounded-md ${t.sync?"bg-gray-600 cursor-not-allowed":"bg-blue-600 hover:bg-blue-500"} text-white flex items-center`,children:[t.sync&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Sincronizar a Markdown"})]}),n&&e.jsx("div",{className:`text-sm ${n.includes("Error")?"text-red-400":"text-green-400"}`,children:n})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg text-white mb-2",children:"Markdown → Firestore"}),e.jsxs("p",{className:"text-sm text-gray-300 mb-3",children:["Migra los artículos existentes en formato Markdown a la base de datos Firestore.",e.jsx("span",{className:"block text-yellow-400 mt-1",children:"Nota: Esta operación solo debe realizarse una vez durante la configuración inicial."})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-2 md:space-y-0 md:space-x-3",children:[e.jsxs("button",{onClick:p,disabled:t.migrate,className:`px-4 py-2 rounded-md ${t.migrate?"bg-gray-600 cursor-not-allowed":"bg-yellow-600 hover:bg-yellow-500"} text-white flex items-center`,children:[t.migrate&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Migrar a Firestore"})]}),c&&e.jsx("div",{className:`text-sm ${c.includes("Error")?"text-red-400":"text-green-400"}`,children:c})]}),a&&e.jsxs("div",{className:"mt-4 bg-green-800/30 p-4 rounded-md",children:[e.jsx("h4",{className:"text-white font-medium mb-2",children:"Resultados de la migración:"}),e.jsx("p",{className:"text-green-300",children:a.message}),a.migratedArticles&&a.migratedArticles.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm text-white mb-2",children:"Artículos migrados:"}),e.jsx("ul",{className:"text-sm text-gray-300 space-y-1 max-h-48 overflow-y-auto",children:a.migratedArticles.map(s=>e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{children:s.title}),e.jsx("span",{className:"text-green-400",children:s.slug})]},s.id))})]})]})]})]})]})}export{b as default};

import{m as I,d as b,b as B,g as p}from"./config.DlMdeYpO.js";import"./hoisted.D3FFN0QM.js";const n=document.getElementById("status-message"),w=document.getElementById("status-text");function a(t,e=!1){n&&w&&(w.textContent=t,n.className=`mt-6 p-4 rounded-md ${e?"bg-red-600/80 text-white":"bg-green-600/80 text-white"}`,n.classList.remove("hidden"),setTimeout(()=>{n.classList.add("hidden")},5e3))}async function v(){try{const t=await p(b(B,"settings","general"));if(t.exists()){const e=t.data(),s=document.getElementById("site-title"),c=document.getElementById("site-description"),m=document.getElementById("contact-email");s&&e.siteTitle&&(s.value=e.siteTitle),c&&e.siteDescription&&(c.value=e.siteDescription),m&&e.contactEmail&&(m.value=e.contactEmail);const l=document.getElementById("meta-keywords"),i=document.getElementById("google-analytics"),r=document.getElementById("enable-sitemap");l&&e.metaKeywords&&(l.value=e.metaKeywords),i&&e.googleAnalytics&&(i.value=e.googleAnalytics),r&&typeof e.enableSitemap=="boolean"&&(r.checked=e.enableSitemap);const d=document.getElementById("enable-comments"),u=document.getElementById("moderate-comments"),g=document.getElementById("require-login");d&&typeof e.enableComments=="boolean"&&(d.checked=e.enableComments),u&&typeof e.moderateComments=="boolean"&&(u.checked=e.moderateComments),g&&typeof e.requireLogin=="boolean"&&(g.checked=e.requireLogin);const y=document.getElementById("enable-newsletter"),E=document.getElementById("newsletter-frequency"),f=document.getElementById("welcome-email");y&&typeof e.enableNewsletter=="boolean"&&(y.checked=e.enableNewsletter),E&&e.newsletterFrequency&&(E.value=e.newsletterFrequency),f&&e.welcomeEmail&&(f.value=e.welcomeEmail)}}catch(t){console.error("Error al cargar configuración:",t),a("Error al cargar la configuración",!0)}}async function o(t){try{await I(b(B,"settings","general"),t,{merge:!0}),a("Configuración guardada exitosamente")}catch(e){console.error("Error al guardar configuración:",e),a("Error al guardar la configuración",!0)}}document.getElementById("general-settings")?.addEventListener("submit",async t=>{t.preventDefault(),new FormData(t.target);const e={siteTitle:document.getElementById("site-title").value,siteDescription:document.getElementById("site-description").value,contactEmail:document.getElementById("contact-email").value};await o(e)});document.getElementById("seo-settings")?.addEventListener("submit",async t=>{t.preventDefault();const e={metaKeywords:document.getElementById("meta-keywords").value,googleAnalytics:document.getElementById("google-analytics").value,enableSitemap:document.getElementById("enable-sitemap").checked};await o(e)});document.getElementById("comments-settings")?.addEventListener("submit",async t=>{t.preventDefault();const e={enableComments:document.getElementById("enable-comments").checked,moderateComments:document.getElementById("moderate-comments").checked,requireLogin:document.getElementById("require-login").checked};await o(e)});document.getElementById("newsletter-settings")?.addEventListener("submit",async t=>{t.preventDefault();const e={enableNewsletter:document.getElementById("enable-newsletter").checked,newsletterFrequency:document.getElementById("newsletter-frequency").value,welcomeEmail:document.getElementById("welcome-email").value};await o(e)});v();
